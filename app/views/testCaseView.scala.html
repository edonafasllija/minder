@(tc: TestCase, localUser: models.User = null, showJobs:Boolean = false)
@import java.util.concurrent.atomic.AtomicInteger


@main(Messages("playauthenticate.navigation.restricted.testdesigner"), "restrictedTestDesigner") {
    <h2>Test Case <span class="hl">@tc.name</span></h2>

    <div class="indent">
        <h3>Short Description</h3>
        <p>
        @tc.shortDescription
        </p>


        @if(tc.parameters != null && tc.parameters.size() > 0) {
            <h3>Parametric Wrapper Names</h3>
            <ul>
            @for(pm <- tc.parameters) {
            <li>
                @pm.name
            </li>
            }
            </ul>
        }
        <hr />


        @if(showJobs == true) {
            <table><tr><td class="activetab"><h4><a href="/viewTestCase?id=@tc.id&showJobs=true">
                Jobs</a></h4></td><td class="passivetab"><h4><a href="/viewTestCase?id=@tc.id&showJobs=false">
                Mtdl Code</a></h4></td></tr></table>
        } else {
            <table><tr><td class="passivetab"><h4><a href="/viewTestCase?id=@tc.id&showJobs=true">
                Jobs</a></h4></td><td class="activetab"><h4><a href="/viewTestCase?id=@tc.id&showJobs=false">
                Mtdl Code</a></h4></td></tr></table>
        }
        <table class="section fullw" style="border-top:1px solid gray; margin-top:0;">
            <tr>
                <td>
                @if(showJobs == true) {
                    <!-- Display the list of Jobs assigned to this test case-->

                    <br />
                    @defining(new AtomicInteger(1)) { index =>
                        <table class="shaded">
                            <tr>
                                <th style="border-top:1px solid white; border-left:1px solid white ; background-color:#ffffff ;">&nbsp;</th>
                                <th>Job Name</th>
                                <th>Short Description</th>
                                <th style="border-top:1px solid white; border-right:1px solid white ; background-color:#ffffff ;">&nbsp;</th>
                            </tr>
                            @for(job <- Job.findByTestCase(tc)) {
                                <tr>
                                    <td>@index.getAndIncrement()</td> <td><a href="/viewJob?id=@job.id&showHistory=true">@job.name</a></td> <td>SHORT Description</td>
                                    <td>
                                        <div title="Delete" class="bevel2 celldiv" style="height:30px; width:30px;">
                                            <img src="@routes.Assets.at("/images/trash2-64.png")" height="16px" alt='@job.id'/>
                                        </div>
                                    </td>
                                </tr>
                            }
                        </table>
                    }

                } else {
                    <h3>Mtdl Code</h3>
                        <p>Theme: <select id="select">
                            <option>default</option>
                            <option>3024-day</option>
                            <option>3024-night</option>
                            <option>ambiance</option>
                            <option>base16-dark</option>
                            <option>base16-light</option>
                            <option>blackboard</option>
                            <option>cobalt</option>
                            <option>eclipse</option>
                            <option>elegant</option>
                            <option>erlang-dark</option>
                            <option>lesser-dark</option>
                            <option>mbo</option>
                            <option>mdn-like</option>
                            <option>midnight</option>
                            <option>monokai</option>
                            <option>neat</option>
                            <option selected>neo</option>
                            <option>night</option>
                            <option>paraiso-dark</option>
                            <option>paraiso-light</option>
                            <option>pastel-on-dark</option>
                            <option>rubyblue</option>
                            <option>solarized dark</option>
                            <option>solarized light</option>
                            <option>the-matrix</option>
                            <option>tomorrow-night-eighties</option>
                            <option>twilight</option>
                            <option>vibrant-ink</option>
                            <option>xq-dark</option>
                            <option>xq-light</option>
                        </select>
                        </p>
                        <hr />

                        <style>
                        .CodeMirror {
                        border: 1px solid #eee;
                        height: auto;
                        }
                        </style>

                        <form>
                        <textarea id="code" name="code" class="CodeMirror fullw">
            @tc.tdl
                        </textarea>
                        </form>
                            <script>
                            var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
                                lineWrapping: true,
                                lineNumbers: true,
                                styleActiveLine: true,
                                readOnly: true,
                                viewportMargin: Infinity,
                                mode: {name: "text/x-scala", globalVars: true},
                                theme: "neo"
                            });

                            $( "#select" ).change(function() {
                            $( "#select option:selected" ).each(function() {
                            editor.setOption("theme", $( this ).text());
                            });
                            });
                            </script>
                }
                </td>
            </tr>
        </table>
    </div>
    <br />
}