@(frm: Form[_], localUser: models.User = null)

@import helper._
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapBasic.f) }

@if(frm.hasGlobalErrors) {
<p class="alert alert-danger">
  @frm.globalError.message
</p>
}

<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/3024-day.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/3024-night.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/ambiance.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/base16-dark.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/base16-light.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/blackboard.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/cobalt.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/eclipse.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/elegant.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/erlang-dark.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/lesser-dark.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/mbo.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/mdn-like.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/midnight.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/monokai.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/neat.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/neo.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/night.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/paraiso-dark.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/paraiso-light.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/pastel-on-dark.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/rubyblue.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/solarized.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/the-matrix.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/tomorrow-night-eighties.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/twilight.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/vibrant-ink.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/xq-dark.css")" rel="stylesheet">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme/xq-light.css")" rel="stylesheet">

<style>
    #accordion1 {
    height: 100%;
    overflow:scroll;
    }

    .myscroll{
    overflow:scroll;
    width:100%;

    background: rgb(200,230,255);
    }

</style>

<script>
  $(function() {
    $( "#accordion1" ).accordion({
      collapsible: true,
      heightStyle: "content"
    });

	var textArea = document.getElementById("tdl");
    var editor = CodeMirror.fromTextArea(textArea, {
        lineNumbers: true,
        lineWrapping: true,
        styleActiveLine: true,
        extraKeys: {"Ctrl-Space": "autocomplete"},
        mode: {name: "text/x-scala", globalVars: true},
        theme: "neo"
    });
    
    // store it
    $("#tdl").data('CodeMirrorInstance', editor);
    
    editor.on("change", function(cm, change) {
		textArea.value = editor.getDoc().getValue();
    });

    $( "select" ).change(function() {
        $( "select option:selected" ).each(function() {
           editor.setOption("theme", $( this ).text());
        });

    });

   
  });
</script>

<div id="contentPane" style="width:100%;height:94%;margin:0;padding:0;">

    <table style="width:100%;height:100%;">
        <tr>
        	<td>
        		@inputText(
					frm("name"),
					'_label -> "Test Case Name"
					)
        	</td>
        	<td>
				@inputText(
				frm("shortDescription"),
				'_label -> "Short Description"
				)
        	</td>
        </tr>
        <tr style="height:10%;">
            <td>
                <h4 class="demoHeaders">Wrappers</h4>
            </td>

            <td>
                <h4 class="demoHeaders">Test Case Editor</h4>
            </td>
        </tr>
        <tr style="width:100%;height:90%;">
            <td style="width:30%;height:100%;overflow:auto;border: 1px solid red">
                <div id="accordion1">
                @defining(Wrapper.getAll()){ allWrappers =>
                  @for(currentWrapper <- allWrappers){
                    <h3><b>@currentWrapper.name</b></h3>
                      <div style="height:70%">
                          <div class="myscroll">
                            <div><b>Signals</b></div>
                              @for(currentSignal <- currentWrapper.signals){
                                <p id="signal@currentWrapper.id-@currentSignal.id">- @currentSignal.signature</p>
                                <script>
                                  $("#signal@currentWrapper.id-@currentSignal.id").click(function(){
                                     // get it
                                     var editor = $("#tdl").data('CodeMirrorInstance');
                                     // from here on the API functions are available to 'myInstance' again.
                                     var start_cursor = editor.getCursor();
                                     var cursorLine = start_cursor.line;
                                     var cursorCh = start_cursor.ch;
                                     editor.replaceRange("\"@currentSignal.signature\" of \"@currentWrapper.name\"", start_cursor);
                                  });
                                </script>
                               }
                               &nbsp;
                              <div><b>Slots</b></div>
                              @for(currentSlot <- currentWrapper.slots){
                                <p id="slot@currentWrapper.id-@currentSlot.id">- @currentSlot.signature</p>
                                  <script>
                                    $("#slot@currentWrapper.id-@currentSlot.id").click(function(){
                                       // get it
                                       var editor = $("#tdl").data('CodeMirrorInstance');
                                       // from here on the API functions are available to 'myInstance' again.
                                       var start_cursor = editor.getCursor();
                                       var cursorLine = start_cursor.line;
                                       var cursorCh = start_cursor.ch;
                                       editor.replaceRange("\"@currentSlot.signature\" of \"@currentWrapper.name\"", start_cursor);
                                    });
                                 </script>
                               }
                          </div>
                      </div>
                  }
                }
                </div>
            </td>

            <td style="width:70%;height:100%;">
                <div id="sectionnav">
                    <p>Theme: <select onchange="selectTheme()" id="select">
                        <option>default</option>
                        <option>3024-day</option>
                        <option>3024-night</option>
                        <option>ambiance</option>
                        <option>base16-dark</option>
                        <option>base16-light</option>
                        <option>blackboard</option>
                        <option>cobalt</option>
                        <option>eclipse</option>
                        <option>elegant</option>
                        <option>erlang-dark</option>
                        <option>lesser-dark</option>
                        <option>mbo</option>
                        <option>mdn-like</option>
                        <option>midnight</option>
                        <option>monokai</option>
                        <option>neat</option>
                        <option selected>neo</option>
                        <option>night</option>
                        <option>paraiso-dark</option>
                        <option>paraiso-light</option>
                        <option>pastel-on-dark</option>
                        <option>rubyblue</option>
                        <option>solarized dark</option>
                        <option>solarized light</option>
                        <option>the-matrix</option>
                        <option>tomorrow-night-eighties</option>
                        <option>twilight</option>
                        <option>vibrant-ink</option>
                        <option>xq-dark</option>
                        <option>xq-light</option>
                    </select>
                    </p>
                    <article>
                        
		         	    @textarea(frm("tdl"), 'rows -> 20, 'col -> 40, 'class -> "CodeMirror")
                    </article>
                </div>
            </td>
        </tr>
    </table>

</div>

<input type="hidden" name="id" id="id" value='@frm("id").value' />
<input type="hidden" name="assertionId" id="assertionId" value='@frm("assertionId").value' />
